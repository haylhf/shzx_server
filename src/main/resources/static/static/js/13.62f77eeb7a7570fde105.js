webpackJsonp([13],{"K/ZZ":function(t,e,a){var n=a("PNV+");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("6a27d2f0",n,!0)},"PNV+":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.root_div[data-v-f6ec9e4e] {\n\tposition: relative;\n\tpadding: 20px;\n\twidth: 100%;\n\theight: 85vh;\n}\n.el-select[data-v-f6ec9e4e] {\n\twidth: 100%;\n}\n",""])},zL3K:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=a("BO1k"),o=a.n(i),l=(a("zL8q"),a("vt++")),s=a("V5TU"),r={name:"maintain_item",components:{},data:function(){return n=this,{activeId:"",targetId:"",editableTabs:[],tabIndex:2,loadingUI:!1,totalRecords:0,totalPage:1,pageSize:l.a.EveryPageNum,currentPage:1,startRow:1,selectedItem:[],formLabelWidth:"100px",addTabDialogVisible:!1,addTabform:{name:""},isAdd:!0,addDialogVisible:!1,addContentform:{maintainContent:""},contentformTitle:"添加保养内容",deleteContentConfirmDialog:!1,deleteTabConfirmDialog:!1,maintainTypeList:[]}},methods:{filterMaintainType:function(t){for(var e=n.maintainTypeList[0].maintainTypeName,a=0;a<n.maintainTypeList.length;a++)if(t==n.maintainTypeList[a].id){e=n.maintainTypeList[a].maintainTypeName;break}return e},onConfirmDeleteTab:function(){this.deleteTabConfirmDialog=!1,this.deleteTabFromUI()},deleteTabFromUI:function(){var t={maintainLibName:n.getCurrentActiveTab().name};Object(s.f)(t).then(function(t){if(responseIsOK(t)){var e=n.editableTabs,a=n.activeId;a===n.targetId&&e.forEach(function(t,n){if(t.id===a){var i=e[n+1]||e[n-1];i&&(a=i.id)}}),n.activeId=a,n.editableTabs=e.filter(function(t){return t.id!==n.targetId}),n.onSearchDetailData()}else showMSG(n,isStringEmpty(t.data.message)?"删除失败！":t.data.message)})},onConfirmDeleteContent:function(){var t=this;Object(s.e)(this.selectedItem.id).then(function(e){if(responseIsOK(e)){var a=t.editableTabs,i=!0,l=!1,s=void 0;try{for(var r,d=o()(a);!(i=(r=d.next()).done);i=!0){var c=r.value;if(c.id==t.activeId){var m=!0,f=!1,b=void 0;try{for(var u,v=o()(c.tableData);!(m=(u=v.next()).done);m=!0){var h=u.value;if(h.id==t.selectedItem.id){var p=c.tableData.indexOf(h);c.tableData.splice(p,1)}}}catch(t){f=!0,b=t}finally{try{!m&&v.return&&v.return()}finally{if(f)throw b}}}}}catch(t){l=!0,s=t}finally{try{!i&&d.return&&d.return()}finally{if(l)throw s}}t.editableTabs=a.filter(function(e){return e.id!==t.targetId}),t.deleteContentConfirmDialog=!1}else showMSG(n,isStringEmpty(e.data.message)?"删除失败！":e.data.message)})},handleCurrentChange:function(t){this.currentPage=t,n.onSearchDetailData()},addTabOK:function(){if(isStringEmpty(this.addTabform.name))showMessage(this,"保养项不能为空！");else{var t={maintainLibName:this.addTabform.name,maintainType:"0"};Object(s.b)(t).then(function(t){responseIsOK(t)?(n.onSearchBaseData(),n.addTabDialogVisible=!1,n.addTabform.name=""):showMSG(n,isStringEmpty(t.data.message)?"保存失败！":t.data.message)})}},handleAddContent:function(){this.isAdd=!0,this.addDialogVisible=!0,this.contentformTitle=this.isAdd?"增加保养内容":"编辑保养内容"},getCurrentActiveTab:function(){var t=null,e=!0,a=!1,i=void 0;try{for(var l,s=o()(n.editableTabs);!(e=(l=s.next()).done);e=!0){var r=l.value;r.id===n.activeId&&(t=r)}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}return t},addContentOK:function(){var t=this;if(isStringEmpty(this.addContentform.maintainContent))showMessage(this,"保养内容不能为空！");else if(isStringEmpty(this.addContentform.maintainType))showMessage(this,"请选择保养类型！");else{var e=n.getCurrentActiveTab(),a={maintainLibName:e.name,maintainContent:this.addContentform.maintainContent,maintainType:this.addContentform.maintainType};if(this.isAdd)Object(s.b)(a).then(function(t){responseIsOK(t)?(n.onSearchDetailData(),n.addContentform.maintainContent="",n.addDialogVisible=!1):showMSG(n,isStringEmpty(t.data.message)?"提交失败！":t.data.message)});else{var i=!0,l=!1,r=void 0;try{for(var d,c=o()(e.tableData);!(i=(d=c.next()).done);i=!0){var m=d.value;m.name==this.addContentform.name&&(a.id=m.id)}}catch(t){l=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(l)throw r}}Object(s.m)(a).then(function(a){if(responseIsOK(a)){var i=!0,l=!1,s=void 0;try{for(var r,d=o()(e.tableData);!(i=(r=d.next()).done);i=!0){var c=r.value;c.id==t.addContentform.id&&(c.maintainContent=t.addContentform.maintainContent)}}catch(t){l=!0,s=t}finally{try{!i&&d.return&&d.return()}finally{if(l)throw s}}n.addContentform.maintainContent="",n.addDialogVisible=!1}else showMSG(n,isStringEmpty(a.data.message)?"提交失败！":a.data.message)})}}},handleTabClick:function(t,e){var a=this;this.currentPage=1,n.editableTabs.forEach(function(t,e){t.id===a.activeId&&(n.editableTabs[e].tableData=[])}),n.onSearchDetailData()},handleClick:function(t,e){"add"===e&&(this.addTabDialogVisible=!0),"remove"===e&&(this.deleteTabConfirmDialog=!0,this.targetId=t)},handleEdit:function(t){this.isAdd=!1,this.addContentform=copyObjectByJSON(t),this.addDialogVisible=!0,this.contentformTitle=this.isAdd?"增加保养内容":"编辑保养内容"},handleDelete:function(t){this.selectedItem=copyObjectByJSON(t),this.deleteContentConfirmDialog=!0},onSearchBaseData:function(){Object(s.k)({maintainType:"",maintainLibName:"",page:"",size:""}).then(function(t){if(responseIsOK(t)){n.editableTabs=[];var e=!0,a=!1,i=void 0;try{for(var l,s=o()(t.data.data.list);!(e=(l=s.next()).done);e=!0){var r=l.value;n.editableTabs.push({id:r.id.toString(),name:r.maintainLibName,tableData:[]})}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}n.editableTabs.length>0&&(n.activeId=n.editableTabs[n.editableTabs.length-1].id),n.onSearchDetailData()}else showMSG(n,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})},onSearchDetailData:function(){var t=this,e=n.getCurrentActiveTab();if(null!=e){var a={maintainType:"1",maintainLibName:e.name,page:this.currentPage,size:this.pageSize};Object(s.k)(a).then(function(e){responseIsOK(e)?(n.totalRecords=e.data.data.total,n.startRow=e.data.data.startRow,n.editableTabs.forEach(function(a,i){a.id===t.activeId&&(n.editableTabs[i].tableData=e.data.data.list)})):showMSG(n,isStringEmpty(e.data.message)?"查询数据失败！":e.data.message)})}},loadMaintainType:function(){Object(s.j)({page:"",size:""}).then(function(t){responseIsOK(t)?n.maintainTypeList=t.data.data.list:showMSG(n,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})},initData:function(){n.loadMaintainType(),n.onSearchBaseData()}},filters:{},created:function(){},mounted:function(){this.initData()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root_div"},[a("div",[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.handleClick,"tab-click":t.handleTabClick},model:{value:t.activeId,callback:function(e){t.activeId=e},expression:"activeId"}},t._l(t.editableTabs,function(e,n){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.id}},[a("div",[a("div",{staticStyle:{"margin-bottom":"16px"},attrs:{align:"right"}},[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("增加保养内容")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.handleAddContent}})],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUI,expression:"loadingUI"}],staticStyle:{width:"100%","font-size":"16px"},attrs:{"element-loading-text":"获取数据中...",data:e.tableData,border:"","highlight-current-row":"","empty-text":"暂无数据...","show-overflow-tooltip":"true"}},[a("el-table-column",{attrs:{width:"75",align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.$index+t.startRow)+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"保养内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                                    "+t._s(e.row.maintainContent)+"\n                                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"保养类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                                    "+t._s(t.filterMaintainType(e.row.maintainType))+"\n                                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){t.handleEdit(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalRecords},on:{"current-change":t.handleCurrentChange}})],1)],1)])})),t._v(" "),a("el-dialog",{attrs:{title:"添加",visible:t.addTabDialogVisible,width:"40%"},on:{"update:visible":function(e){t.addTabDialogVisible=e}}},[a("el-form",{staticStyle:{"font-size":"18px"},attrs:{model:t.addTabform}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"保养项名称：","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{"font-size":"18px"},attrs:{clearable:""},model:{value:t.addTabform.name,callback:function(e){t.$set(t.addTabform,"name",e)},expression:"addTabform.name"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addTabDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addTabOK}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.contentformTitle,visible:t.addDialogVisible,width:"40%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{attrs:{model:t.addContentform}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"保养内容：","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{"font-size":"18px"},attrs:{type:"textarea",rows:5,clearable:""},model:{value:t.addContentform.maintainContent,callback:function(e){t.$set(t.addContentform,"maintainContent",e)},expression:"addContentform.maintainContent"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"保养类型：","label-width":t.formLabelWidth}},[a("el-select",{attrs:{clearable:""},model:{value:t.addContentform.maintainType,callback:function(e){t.$set(t.addContentform,"maintainType",e)},expression:"addContentform.maintainType"}},t._l(t.maintainTypeList,function(t){return a("el-option",{attrs:{value:t.id,label:t.maintainTypeName}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addContentOK}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteTabConfirmDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.deleteTabConfirmDialog=e}}},[a("span",[t._v("确认要删除选定的安装项吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(e){t.deleteTabConfirmDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConfirmDeleteTab}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteContentConfirmDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.deleteContentConfirmDialog=e}}},[a("span",[t._v("确认要删除选定的安装内容吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(e){t.deleteContentConfirmDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConfirmDeleteContent}},[t._v("确 定")])],1)])],1)])},staticRenderFns:[]};var c=a("VU/8")(r,d,!1,function(t){a("K/ZZ")},"data-v-f6ec9e4e",null);e.default=c.exports}});