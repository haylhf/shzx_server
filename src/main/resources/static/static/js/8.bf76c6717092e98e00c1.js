webpackJsonp([8,31],{Bcf4:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,n=e("BO1k"),l=e.n(n),i=e("vt++"),o=e("QSzI"),r=(e("0xDb"),e("weGg")),c={name:"InstallDetail",props:{machineNameplate:{type:String,default:""}},data:function(){return s=this,{statusList:i.a.InstallStatusList,loading:{},formData:{},activeTabId:0,installCotentList:[],skillStars:[],installMembers:[]}},filters:{filterDateString:function(t){return isStringEmpty(t)?"":new Date(t).format("yyyy-MM-dd")},filterStatus:function(t){for(var a="",e=0;e<s.statusList.length;e++)if(t==s.statusList[e].value){a=s.statusList[e].name;break}return a}},methods:{onStarLoad:function(t){return Object(r.c)(t.starMode)},isShowContent:function(t){return!isUndefined(t)&&"基础项"!=t.install_lib_name},loadMembers:function(){s.installMembers=[];var t={page:"",size:"",installRecordId:s.formData.id};Object(o.g)(t).then(function(t){responseIsOK(t)?s.installMembers=t.data.data.list:showMSG(s,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})},loadData:function(){if(this.formData={},s.loading=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),null!=s.machineNameplate){var t={nameplate:s.machineNameplate};Object(o.f)(t).then(function(t){if(responseIsOK(t)){if(t.data.data.list.length>0){s.formData=t.data.data.list[0],s.installCotentList=[];try{var a=JSON.parse(s.formData.installInfo),e=!0,n=!1,i=void 0;try{for(var o,r=l()(a);!(e=(o=r.next()).done);e=!0){var c=o.value,m=!1,f=!0,d=!1,u=void 0;try{for(var p,g=l()(s.installCotentList);!(f=(p=g.next()).done);f=!0){var h=p.value;if(c.install_lib_name==h.install_lib_name){m=!0,h.contentList.push(c);break}}}catch(t){d=!0,u=t}finally{try{!f&&g.return&&g.return()}finally{if(d)throw u}}if(!m){var v=[];v.push(c),s.installCotentList.push({install_lib_name:c.install_lib_name,contentList:v})}}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}s.loadMembers()}catch(t){console.log(t)}}}else showMSG(s,isStringEmpty(t.data.message)?"加载数据失败！":t.data.message);s.loading.close()}).catch(function(t){s.loading.close()})}},tabSwitchClick:function(t){console.log("tabSwitchClick:"+t)}},mounted:function(){s.loadData(),s.skillStars=Object(r.d)(s.formData.maintainFeedbackCustomerMark)}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"install_detail_div"},[e("el-form",{attrs:{model:t.formData,"label-position":"right","label-width":"100px"}},[e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("客户信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"客户:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineCustomerName)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系方式:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineCustomerPhone)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"代理商:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineAgentName)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系方式:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineAgentPhone)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"出厂日期:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.facoryDate)))])])],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("机器信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"机器编号:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineNameplate)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"机型:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineType)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"针数:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.needleNum)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"头数:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.headNum)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"头距:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.headDistance)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"X行程:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.xDistance)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"Y行程:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.yDistance)}})])],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("调试信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"调试联系人:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerInInstallRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系电话:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerPhoneInInstallRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"地址:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerAddressInInstallRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"调试员:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.installChargePersonName)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"调试时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.installActualTime)))])])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"安装负责人:"}},[e("el-tag",{staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                "+t._s(t.formData.installChargePersonName)+"\n                            ")])],1)],1)],1),t._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"安装人员:"}},t._l(t.installMembers,function(a){return e("el-tag",{key:a.name,staticClass:"tagClass",attrs:{type:"info"}},[t._v("\n                                "+t._s(a.name)+"\n                            ")])}))],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"调试结果:"}},[0==t.formData.installStatus?e("div",{staticClass:"status_class",staticStyle:{color:"#686868"}},[t._v("\n                                    "+t._s(t._f("filterStatus")(t.formData.installStatus))+"\n                            ")]):t._e(),t._v(" "),1==t.formData.installStatus?e("div",{staticClass:"status_class",staticStyle:{color:"#8b6c0e"}},[t._v("\n                                    "+t._s(t._f("filterStatus")(t.formData.installStatus))+"\n                            ")]):t._e(),t._v(" "),2==t.formData.installStatus?e("div",{staticClass:"status_class",staticStyle:{color:"#13678b"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.installStatus))+"\n                            ")]):t._e(),t._v(" "),3==t.formData.installStatus?e("div",{staticClass:"status_class",staticStyle:{color:"#198b57"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.installStatus))+"\n                            ")]):t._e(),t._v(" "),4==t.formData.installStatus?e("div",{staticClass:"status_class",staticStyle:{color:"darkred"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.installStatus))+"\n                            ")]):t._e()])],1)],1)],1)]),t._v(" "),e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabSwitchClick},model:{value:t.activeTabId,callback:function(a){t.activeTabId=a},expression:"activeTabId"}},[e("el-tab-pane",{attrs:{label:"调试内容"}},[t.installCotentList.length>0?e("div",t._l(t.installCotentList,function(a){return e("div",{staticClass:"panel panel-primary",staticStyle:{"font-weight":"bold","font-size":"20px"}},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("span",{staticClass:"panel-title"},[t._v(t._s(a.install_lib_name))])]),t._v(" "),e("div",{staticClass:"panel-body"},t._l(a.contentList,function(a){return e("el-col",{attrs:{span:22}},[t.isShowContent(a)?e("span",{staticStyle:{"font-weight":"bold","font-size":"20px","margin-left":"5px"}},[t._v(t._s(a.install_content))]):e("el-form-item",{attrs:{label:a.install_content}},[e("span",[t._v(": "+t._s(a.install_value))])])],1)}))])})):e("span",[t._v("\n                        暂无内容\n                ")])]),t._v(" "),e("el-tab-pane",{attrs:{label:"调试总结"}},[e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"安装员备注:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.installResult)}})])],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"客户评价"}},[e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"用户评分:"}},[e("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._l(t.skillStars,function(a){return e("div",{staticStyle:{float:"left"}},[e("svg-icon",{staticStyle:{width:"30px",height:"30px",margin:"3px"},attrs:{"icon-class":t.onStarLoad(a),"data-toggle":"tooltip","data-placement":"top",title:a.score}})],1)}),t._v(" "),""!=t.formData.installFeedbackCustomerMark?e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                                         "+t._s(t.formData.installFeedbackCustomerMark)+" 分\n                            ")]):e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                                        暂无评分\n                            ")])],2)])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"用户评论:"}},[e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                            "+t._s(t.formData.installFeedbackCustomerSuggestion)+"\n                        ")])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var f=e("VU/8")(c,m,!1,function(t){e("c9+T")},"data-v-2f8b3be0",null);a.default=f.exports},H2Ks:function(t,a,e){var s=e("N8zg");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("3e3ab9c1",s,!0)},N8zg:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.install_home_div[data-v-9ca3544c] {\n\t    position: relative;\n\t    padding: 20px;\n\t    width: 100%;\n\t    height: 85vh;\n}\n.tagClass[data-v-9ca3544c] {\n\t    margin-left: 3px;\n}\n.el-select[data-v-9ca3544c] {\n\t    width: 100%;\n}\n",""])},by6R:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,n=e("woOf"),l=e.n(n),i=e("mvHQ"),o=e.n(i),r=e("BO1k"),c=e.n(r),m=e("vt++"),f=(e("zL8q"),e("QSzI")),d=e("Bcf4"),u=e("cNRr"),p=(e("0xDb"),{name:"install_home",components:{InstallDetail:d.default,AssignTask:u.default},data:function(){return s=this,{machineNameplate:"",selectedItem:{},tableData:[],pageSize:m.a.EveryPageNum,currentPage:1,startRow:0,totalRecords:0,statusList:m.a.InstallStatusList,condition:{nameplate:"",orderNum:"",machineType:"",customer:"",isAgent:!0,agent:"",status:"",selectDate:""},allMachineType:[],allRoles:[],loadingUI:!1,showDetailDialog:!1,showAssignTaskDialog:!1,showConfirmAssign:!1,assignTaskData:{formData:{planDate:"",customerName:""},workerList:[]},installLibList:[],installLib:"",showInstallDialog:!1,machineInfo:{},assignTaskType:m.a.AssignTaskType.INSTALL,pickerOptions:m.a.DateRangeOptions,checkedList:[]}},filters:{filterDateString:function(t){return isUndefined(t)||isNull(t)||0==t.length?"":new Date(t).format("yyyy-MM-dd")},filterStatus:function(t){for(var a=s.statusList[0].name,e=0;e<s.statusList.length;e++)if(t==s.statusList[e].value){a=s.statusList[e].name;break}return a},filterMachineType:function(t){for(var a="",e=0;e<s.allMachineType.length;e++)if(t==s.allMachineType[e].id){a=s.allMachineType[e].name;break}return a}},computed:{isDisableOK:{get:function(){return""==s.assignTaskData.formData.planDate||""==s.assignTaskData.formData.customerName||s.assignTaskData.workerList.length<1}}},methods:{isAgentLogin:function(){return"0"!=s.$store.getters.user.user.agent&&""!=s.$store.getters.user.user.agent},filterInstallInfo:function(t){var a=[],e=[];if(isStringEmpty(t))return[];if(0==(e=IsJsonString(t)?JSON.parse(t):t).length)return[];for(var s=0;s<e.length;s++){var n=!1,l=!0,i=!1,o=void 0;try{for(var r,m=c()(a);!(l=(r=m.next()).done);l=!0){var f=r.value;if(f==e[s].installLibName||f==e[s].install_lib_name){n=!0;break}}}catch(t){i=!0,o=t}finally{try{!l&&m.return&&m.return()}finally{if(i)throw o}}n||(e[s].installLibName?a.push(e[s].installLibName):a.push(e[s].install_lib_name))}return a},onConInstall:function(){if(isStringEmpty(s.checkedList))showMSG(s,"请选择安装项！");else{s.showInstallDialog=!1;var t=[],a=!0,e=!1,n=void 0;try{for(var l,i=c()(s.checkedList);!(a=(l=i.next()).done);a=!0){var r=l.value,m=!0,d=!1,u=void 0;try{for(var p,g=c()(s.installLibList);!(m=(p=g.next()).done);m=!0){var h=p.value;r==h.installLibName&&0!=h.isBaseLib&&t.push(h)}}catch(t){d=!0,u=t}finally{try{!m&&g.return&&g.return()}finally{if(d)throw u}}}}catch(t){e=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(e)throw n}}var v={installRecord:o()(s.selectedItem),installLibList:o()(t)};Object(f.m)(v).then(function(t){responseIsOK(t)?(showMSG(s,"设置安装项成功！",1),s.onSearchDetailData()):showMSG(s,isStringEmpty(t.data.message)?"设置安装项失败！":t.data.message)})}},editInstall:function(t){s.selectedItem=copyObject(t),s.checkedList=s.filterInstallInfo(t.installInfo),0==s.checkedList.length&&s.checkedList.push("基础项"),s.showInstallDialog=!0},assignTask:function(t){0!=t.installInfo.length&&null!=t.installInfo?(s.selectedItem=copyObject(t),s.machineInfo.machineCustomerCompanyId=s.selectedItem.machineCustomerCompanyId,s.machineInfo.customerId=s.selectedItem.machineCustomerId,s.machineInfo.customerName=s.selectedItem.machineCustomerName,s.selectedItem.maintainStatus>0?s.showConfirmAssign=!0:s.onConShowAssign()):showMessage(s,"请先设置安装项再派单！")},onConShowAssign:function(){s.showConfirmAssign=!1,s.showAssignTaskDialog=!0,this.$refs.assignTask&&s.$refs.assignTask.loadData()},onConfirmAssign:function(){if(this.$refs.assignTask&&(s.assignTaskData=s.$refs.assignTask.getCurrentData()),null==s.assignTaskData||s.assignTaskData.length<0)showMessage(s,"请填写完整的派单数据！");else if(0!=s.assignTaskData.formData.chargePersonId)if(isStringEmpty(s.assignTaskData.formData.planDate))showMessage(s,"请选择上门日期！");else if(isStringEmpty(s.assignTaskData.workerList))showMessage(s,"请选择要派出的员工！");else{s.showAssignTaskDialog=!1;var t=[];s.assignTaskData.workerList.forEach(function(a){t.push({userId:a.id,installRecordId:s.selectedItem.id})});var a={installRecord:{id:s.selectedItem.id,installChargePerson:s.assignTaskData.formData.chargePersonId,customer:s.assignTaskData.formData.customerId,installPlanDate:s.assignTaskData.formData.planDate},installMembers:t};isStringEmpty(s.assignTaskData.formData.customerName)&&(a.customer=s.selectedItem.machineCustomerId),Object(f.c)(a).then(function(t){responseIsOK(t)?(showMSG(s,"分配任务成功！",1),s.onSearchDetailData()):showMSG(s,isStringEmpty(t.data.message)?"分配任务失败！":t.data.message)})}else showMessage(s,"请选择负责人！")},dataChanged:function(t){s.assignTaskData=l()({},t)},handleCurrentChange:function(t){this.currentPage=t,this.search()},search:function(){this.onSearchDetailData()},onSearchDetailData:function(){var t={orderNum:this.condition.orderNum.trim(),nameplate:this.condition.nameplate.trim(),machineType:this.condition.machineType,installStatus:this.condition.status,installChargePersonName:"",query_start_install_actual_time:"",query_finish_install_actual_time:"",agent:s.isAgentLogin()?s.$store.getters.user.user.agentName:this.condition.agent,isAgent:s.isAgentLogin(),machineCustomerName:this.condition.customer,page:this.currentPage,size:this.pageSize,isFuzzy:!0};null!=this.condition.selectDate&&this.condition.selectDate.length>0&&(t.query_start_install_actual_time=this.condition.selectDate[0].format("yyyy-MM-dd"),t.query_finish_install_actual_time=this.condition.selectDate[1].format("yyyy-MM-dd")),Object(f.h)(t).then(function(t){responseIsOK(t)?(s.tableData=t.data.data.list,s.totalRecords=t.data.data.total,s.startRow=t.data.data.startRow):showMSG(s,isStringEmpty(t.data.message)?"加载数据失败！":t.data.message)})},editWithItem:function(t){s.selectedItem=t,s.machineNameplate=t.machineNameplate,s.showDetailDialog=!0,this.$refs.installDetail&&s.$refs.installDetail.loadData()},initData:function(){s.$store.getters.commonData.machineTypeList.length>0?s.allMachineType=s.$store.getters.commonData.machineTypeList:s.$store.dispatch("getAllMachineType").then(function(){s.allMachineType=s.$store.getters.commonData.machineTypeList}).catch(function(t){showMSG(s,"getAllMachineType failed!")})},initInstallLib:function(){Object(f.k)().then(function(t){responseIsOK(t)&&(s.installLibList=[],s.installLibList=t.data.data.list)})}},created:function(){s.initInstallLib(),this.initData(),this.search(),console.log("user: "+o()(s.$store.getters.user.user))}}),g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"install_home_div"},[e("div",[e("el-col",{staticClass:"well well-lg",staticStyle:{"background-color":"white"}},[e("el-form",{attrs:{model:t.condition,"label-position":"right","label-width":"90px"}},[e("el-row",[e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"机器编号:"}},[e("el-input",{attrs:{placeholder:"机器编号",clearable:"","auto-complete":"off"},model:{value:t.condition.nameplate,callback:function(a){t.$set(t.condition,"nameplate",a)},expression:"condition.nameplate"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"订单编号:"}},[e("el-input",{attrs:{placeholder:"订单号",clearable:"","auto-complete":"off"},model:{value:t.condition.orderNum,callback:function(a){t.$set(t.condition,"orderNum",a)},expression:"condition.orderNum"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"机型:"}},[e("el-select",{attrs:{clearable:""},model:{value:t.condition.machineType,callback:function(a){t.$set(t.condition,"machineType",a)},expression:"condition.machineType"}},t._l(t.allMachineType,function(t){return e("el-option",{attrs:{value:t.name,label:t.name}})}))],1)],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.isAgentLogin(),expression:"!isAgentLogin()"}],attrs:{span:3,offset:1}},[e("el-form-item",{attrs:{label:"显示代理商:"}},[e("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.condition.isAgent,callback:function(a){t.$set(t.condition,"isAgent",a)},expression:"condition.isAgent"}})],1)],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.isAgentLogin()&&t.condition.isAgent,expression:"!isAgentLogin()&&condition.isAgent"}],attrs:{span:5}},[e("el-form-item",{attrs:{label:""}},[e("el-input",{attrs:{placeholder:"代理商",clearable:"","auto-complete":"off"},model:{value:t.condition.agent,callback:function(a){t.$set(t.condition,"agent",a)},expression:"condition.agent"}})],1)],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"完成状态:"}},[e("el-select",{attrs:{clearable:""},model:{value:t.condition.status,callback:function(a){t.$set(t.condition,"status",a)},expression:"condition.status"}},t._l(t.statusList,function(t){return e("el-option",{attrs:{value:t.value,label:t.name}})}))],1)],1),t._v(" "),e("el-col",{attrs:{span:5}},[e("el-form-item",{attrs:{label:"客户:"}},[e("el-input",{attrs:{placeholder:"客户",clearable:"","auto-complete":"off"},model:{value:t.condition.customer,callback:function(a){t.$set(t.condition,"customer",a)},expression:"condition.customer"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"日期:"}},[e("el-date-picker",{attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"—","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.condition.selectDate,callback:function(a){t.$set(t.condition,"selectDate",a)},expression:"condition.selectDate"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:2,offset:3}},[e("el-button",{attrs:{icon:"el-icon-search",size:"normal",type:"primary"},on:{click:t.search}},[t._v("查询\n                            ")])],1)],1)],1),t._v(" "),e("div",[e("el-steps",{attrs:{simple:""}},[e("el-step",{attrs:{title:"设置安装项",status:"finish",icon:"el-icon-setting"}}),t._v(" "),e("el-step",{attrs:{title:"安装调试派单",status:"success"}})],1)],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUI,expression:"loadingUI"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"获取数据中...",data:t.tableData,border:"","empty-text":"暂无数据...","highlight-current-row":"","show-overflow-tooltip":"true"}},[e("el-table-column",{attrs:{width:"75",align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n                            "+t._s(a.$index+t.startRow)+"\n                        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"machineNameplate",label:"机器编号"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"machineType",label:"机型"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v("\n                                "+t._s(a.row.machineType)+"\n                            ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"订单号",sortable:"",align:"center",prop:"orderNum"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v("\n                                "+t._s(a.row.orderNum)+"\n                            ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",sortable:"",prop:"machineCustomerName",label:"客户"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"customerInInstallRecord",label:"客户联系人"}}),t._v(" "),t.isAgentLogin()?t._e():e("el-table-column",{attrs:{align:"center",prop:"machineAgentName",label:"代理商"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",width:"200",prop:"installInfo",label:"安装项"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"btn btn-link",staticStyle:{"font-weight":"bold"},attrs:{disabled:a.row.installStatus>2},on:{click:function(e){t.editInstall(a.row)}}},[""==a.row.installInfo||null==a.row.installInfo?e("span",{staticStyle:{color:"red"}},[t._v("\n                                      点击设置\n                                  ")]):e("div",t._l(t.filterInstallInfo(a.row.installInfo),function(a){return e("el-tag",{key:a,staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                        "+t._s(a)+"\n                                    ")])}))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"installStatus",sortable:"",label:"安装状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.installStatus?e("div",{staticStyle:{color:"#686868"}},[t._v("\n                                "+t._s(t._f("filterStatus")(a.row.installStatus))+"\n                            ")]):t._e(),t._v(" "),1==a.row.installStatus?e("div",{staticStyle:{color:"#8b6c0e"}},[t._v("\n                                "+t._s(t._f("filterStatus")(a.row.installStatus))+"\n                            ")]):t._e(),t._v(" "),2==a.row.installStatus?e("div",{staticStyle:{color:"#13678b"}},[t._v("\n                                "+t._s(t._f("filterStatus")(a.row.installStatus))+"\n                            ")]):t._e(),t._v(" "),3==a.row.installStatus?e("div",{staticStyle:{color:"#198b57"}},[t._v("\n                                "+t._s(t._f("filterStatus")(a.row.installStatus))+"\n                            ")]):t._e(),t._v(" "),4==a.row.installStatus?e("div",{staticStyle:{color:"darkred"}},[t._v("\n                                "+t._s(t._f("filterStatus")(a.row.installStatus))+"\n                            ")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"计划日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("\n                            "+t._s(t._f("filterDateString")(a.row.installPlanDate))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"facoryDate",label:"出厂日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("\n                            "+t._s(t._f("filterDateString")(a.row.facoryDate))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"installActualTime",label:"完成日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v("\n                            "+t._s(t._f("filterDateString")(a.row.installActualTime))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"200",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{attrs:{placement:"top",content:"详情"}},[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(e){t.editWithItem(a.row)}}})],1),t._v(" "),e("el-tooltip",{attrs:{placement:"top",content:"派单"}},[e("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-news"},on:{click:function(e){t.assignTask(a.row)}}})],1)]}}])})],1),t._v(" "),e("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[e("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalRecords},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),e("el-dialog",{attrs:{title:"安装项选择",visible:t.showInstallDialog,"append-to-body":""},on:{"update:visible":function(a){t.showInstallDialog=a}}},[e("el-form",{attrs:{"label-position":"right","label-width":"90px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-checkbox-group",{model:{value:t.checkedList,callback:function(a){t.checkedList=a},expression:"checkedList"}},t._l(t.filterInstallInfo(t.installLibList),function(t){return e("el-checkbox",{key:t,attrs:{disabled:"基础项"==t,label:t}})}))],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"100px"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(a){t.showInstallDialog=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConInstall}},[t._v("确 定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"安装详情",visible:t.showDetailDialog,"append-to-body":"",fullscreen:""},on:{"update:visible":function(a){t.showDetailDialog=a}}},[t.showDetailDialog?e("InstallDetail",{ref:"installDetail",attrs:{machineNameplate:t.machineNameplate}}):t._e(),t._v(" "),e("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"100px"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(a){t.showDetailDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"派单",visible:t.showAssignTaskDialog,"append-to-body":"",width:"70%"},on:{"update:visible":function(a){t.showAssignTaskDialog=a}}},[t.showAssignTaskDialog?e("AssignTask",{ref:"assignTask",attrs:{showType:t.assignTaskType,machineInfo:t.machineInfo,dataChanged:t.dataChanged}}):t._e(),t._v(" "),e("div",{staticClass:"dialog-footer",staticStyle:{"margin-bottom":"20px"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:t.isDisableOK},on:{click:t.onConfirmAssign}},[t._v("确定\n                        ")]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(a){t.showAssignTaskDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"提示",visible:t.showConfirmAssign,"append-to-body":"",width:"30%"},on:{"update:visible":function(a){t.showConfirmAssign=a}}},[e("span",[t._v("当前任务状态是"),e("span",{staticStyle:{"font-weight":"bold","font-size":"18px",color:"#1c8de0"}},[t._v(" "+t._s(t._f("filterStatus")(t.selectedItem.maintainStatus)))]),t._v(", 确定需要再次派单吗？")]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(a){t.showConfirmAssign=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConShowAssign}},[t._v("确 定")])],1)])],1)],1)])},staticRenderFns:[]};var h=e("VU/8")(p,g,!1,function(t){e("H2Ks")},"data-v-9ca3544c",null);a.default=h.exports},"c9+T":function(t,a,e){var s=e("vGyr");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("1b84aa9d",s,!0)},vGyr:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.install_detail_div[data-v-2f8b3be0] {\n\tposition: relative;\n\tpadding: 20px;\n\twidth: 100%;\n}\nspan[data-v-2f8b3be0] {\n\tfont-size: 18px;\n\twidth: 100%;\n\talignment: left;\n\ttext-align: left;\n}\n.tagClass[data-v-2f8b3be0] {\n\tmargin-left: 5px;\n\twidth: 200px;\n}\n.status_class[data-v-2f8b3be0] {\n\tfont-size: 18px;\n\tfont-weight: bold;\n}\n",""])}});