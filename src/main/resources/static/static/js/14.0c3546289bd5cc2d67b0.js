webpackJsonp([14],{ap0m:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=a("BO1k"),l=a.n(n),o=(a("zL8q"),a("vt++"),a("QSzI")),s={name:"install_item",components:{},data:function(){return i=this,{activeId:"",targetId:"",editableTabs:[],tabIndex:2,loadingUI:!1,totalRecords:0,totalPage:1,pageSize:5,currentPage:1,startRow:1,selectedItem:[],formLabelWidth:"100px",addTabDialogVisible:!1,addTabform:{name:""},isAdd:!0,addDialogVisible:!1,addContentform:{installContent:""},contentformTitle:"调试内容",deleteContentConfirmDialog:!1,deleteTabConfirmDialog:!1}},methods:{onConfirmDeleteTab:function(){this.deleteTabConfirmDialog=!1,this.deleteTabFromUI()},deleteTabFromUI:function(){var t={installLibName:i.getCurrentActiveTab().name,isBaseLib:""};Object(o.e)(t).then(function(t){if(responseIsOK(t)){var e=i.editableTabs,a=i.activeId;a===i.targetId&&e.forEach(function(t,i){if(t.id===a){var n=e[i+1]||e[i-1];n&&(a=n.id)}}),i.activeId=a,i.editableTabs=e.filter(function(t){return t.id!==i.targetId}),i.onSearchDetailData()}else showMSG(i,isStringEmpty(t.data.message)?"删除失败！":t.data.message)})},onConfirmDeleteContent:function(){var t=this;Object(o.d)(this.selectedItem.id).then(function(e){if(responseIsOK(e)){var a=t.editableTabs,n=!0,o=!1,s=void 0;try{for(var r,d=l()(a);!(n=(r=d.next()).done);n=!0){var c=r.value;if(c.id==t.activeId){var f=!0,b=!1,m=void 0;try{for(var u,v=l()(c.tableData);!(f=(u=v.next()).done);f=!0){var h=u.value;if(h.id==t.selectedItem.id){var g=c.tableData.indexOf(h);c.tableData.splice(g,1)}}}catch(t){b=!0,m=t}finally{try{!f&&v.return&&v.return()}finally{if(b)throw m}}}}}catch(t){o=!0,s=t}finally{try{!n&&d.return&&d.return()}finally{if(o)throw s}}t.editableTabs=a.filter(function(e){return e.id!==t.targetId}),t.deleteContentConfirmDialog=!1}else showMSG(i,isStringEmpty(e.data.message)?"删除失败！":e.data.message)})},handleCurrentChange:function(t){this.currentPage=t,i.onSearchDetailData()},addTabOK:function(){if(isStringEmpty(this.addTabform.name))showMessage(this,"调试项不能为空！");else{var t={installLibName:this.addTabform.name,isBaseLib:"0"};Object(o.a)(t).then(function(t){responseIsOK(t)?(i.onSearchBaseData(),i.addTabDialogVisible=!1,i.addTabform.name=""):showMSG(i,isStringEmpty(t.data.message)?"提交失败！":t.data.message)})}},handleAddContent:function(){this.isAdd=!0,this.addDialogVisible=!0,this.contentformTitle=this.isAdd?"增加调试内容":"编辑调试内容"},getCurrentActiveTab:function(){var t=null,e=!0,a=!1,n=void 0;try{for(var o,s=l()(i.editableTabs);!(e=(o=s.next()).done);e=!0){var r=o.value;r.id===i.activeId&&(t=r)}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}return t},addContentOK:function(){var t=this;if(isStringEmpty(this.addContentform.installContent))showMessage(this,"调试内容不能为空！");else{var e=i.getCurrentActiveTab(),a={installLibName:e.name,installContent:this.addContentform.installContent,isBaseLib:"1"};if(this.isAdd)Object(o.a)(a).then(function(t){responseIsOK(t)?(i.onSearchDetailData(),i.addContentform.installContent="",i.addDialogVisible=!1):showMSG(i,isStringEmpty(t.data.message)?"提交失败！":t.data.message)});else{var n=!0,s=!1,r=void 0;try{for(var d,c=l()(e.tableData);!(n=(d=c.next()).done);n=!0){var f=d.value;f.name==this.addContentform.name&&(a.id=f.id)}}catch(t){s=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(s)throw r}}Object(o.n)(a).then(function(a){if(responseIsOK(a)){var n=!0,o=!1,s=void 0;try{for(var r,d=l()(e.tableData);!(n=(r=d.next()).done);n=!0){var c=r.value;c.id==t.addContentform.id&&(c.installContent=t.addContentform.installContent)}}catch(t){o=!0,s=t}finally{try{!n&&d.return&&d.return()}finally{if(o)throw s}}i.addContentform.installContent="",i.addDialogVisible=!1}else showMSG(i,isStringEmpty(a.data.message)?"提交失败！":a.data.message)})}}},handleTabClick:function(t,e){var a=this;this.currentPage=1,i.editableTabs.forEach(function(t,e){t.id===a.activeId&&(i.editableTabs[e].tableData=[])}),i.onSearchDetailData()},handleClick:function(t,e){"add"===e&&(this.addTabDialogVisible=!0),"remove"===e&&(this.deleteTabConfirmDialog=!0,this.targetId=t)},handleEdit:function(t){this.isAdd=!1,this.addContentform=copyObjectByJSON(t),this.addDialogVisible=!0,this.contentformTitle=this.isAdd?"增加调试内容":"编辑调试内容"},handleDelete:function(t){this.selectedItem=copyObjectByJSON(t),this.deleteContentConfirmDialog=!0},onSearchBaseData:function(){Object(o.l)({isBaseLib:"0",installLibName:"",page:"",size:""}).then(function(t){if(responseIsOK(t)){i.editableTabs=[];var e=!0,a=!1,n=void 0;try{for(var o,s=l()(t.data.data.list);!(e=(o=s.next()).done);e=!0){var r=o.value;i.editableTabs.push({id:r.id.toString(),name:r.installLibName,tableData:[]})}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}i.editableTabs.length>0&&(i.activeId=i.editableTabs[i.editableTabs.length-1].id),i.onSearchDetailData()}else showMSG(i,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})},onSearchDetailData:function(){var t=i.getCurrentActiveTab();if(null!=t){var e={isBaseLib:"1",installLibName:t.name,page:this.currentPage,size:this.pageSize};Object(o.l)(e).then(function(t){responseIsOK(t)?(i.totalRecords=t.data.data.total,i.startRow=t.data.data.startRow,i.editableTabs.forEach(function(e,a){e.id===i.activeId&&(i.editableTabs[a].tableData=t.data.data.list)})):showMSG(i,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})}},initData:function(){i.onSearchBaseData()}},filters:{},created:function(){},mounted:function(){this.initData()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"install_item_div"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.handleClick,"tab-click":t.handleTabClick},model:{value:t.activeId,callback:function(e){t.activeId=e},expression:"activeId"}},t._l(t.editableTabs,function(e,i){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.id}},[a("div",[a("div",{staticStyle:{"margin-bottom":"16px"},attrs:{align:"right"}},[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("增加调试内容")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.handleAddContent}})],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUI,expression:"loadingUI"}],staticStyle:{width:"100%","font-size":"16px"},attrs:{"element-loading-text":"获取数据中...",data:e.tableData,border:"","highlight-current-row":"","empty-text":"暂无数据...","show-overflow-tooltip":"true"}},[a("el-table-column",{attrs:{width:"75",align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.$index+t.startRow)+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"调试内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                                    "+t._s(e.row.installContent)+"\n                                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){t.handleEdit(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}})],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalRecords},on:{"current-change":t.handleCurrentChange}})],1)],1)])})),t._v(" "),a("el-dialog",{attrs:{title:"添加",visible:t.addTabDialogVisible,width:"40%"},on:{"update:visible":function(e){t.addTabDialogVisible=e}}},[a("el-form",{staticStyle:{"font-size":"18px"},attrs:{model:t.addTabform}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"安装项名称：","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{"font-size":"18px"},attrs:{clearable:""},model:{value:t.addTabform.name,callback:function(e){t.$set(t.addTabform,"name",e)},expression:"addTabform.name"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addTabDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addTabOK}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.contentformTitle,visible:t.addDialogVisible,width:"40%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{attrs:{model:t.addContentform}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"调试内容：","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{"font-size":"18px"},attrs:{type:"textarea",rows:5,clearable:""},model:{value:t.addContentform.installContent,callback:function(e){t.$set(t.addContentform,"installContent",e)},expression:"addContentform.installContent"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addContentOK}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteTabConfirmDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.deleteTabConfirmDialog=e}}},[a("span",[t._v("确认要删除选定的安装项吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(e){t.deleteTabConfirmDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConfirmDeleteTab}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteContentConfirmDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.deleteContentConfirmDialog=e}}},[a("span",[t._v("确认要删除选定的安装内容吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(e){t.deleteContentConfirmDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onConfirmDeleteContent}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(s,r,!1,function(t){a("vTNH")},"data-v-d6ddac94",null);e.default=d.exports},vTNH:function(t,e,a){var i=a("zJPD");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("56595612",i,!0)},zJPD:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.install_item_div[data-v-d6ddac94] {\n\t    position: relative;\n\t    padding: 20px;\n\t    width: 100%;\n\t    height: 85vh;\n}\n.el-select[data-v-d6ddac94] {\n\t    width: 100%;\n}\n",""])}});