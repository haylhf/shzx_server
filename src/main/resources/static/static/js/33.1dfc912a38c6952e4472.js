webpackJsonp([33],{Iq2B:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.root_div[data-v-20762872] {\n\tposition: relative;\n\tpadding: 20px;\n\twidth: 100%;\n\theight: 85vh;\n}\n.MainInfo[data-v-20762872] {\n\tfont-weight: bold;\n\tcolor: #2b542c;\n}\n.tagClass[data-v-20762872] {\n\tmargin-left: 5px;\n\twidth: 200px;\n}\nspan[data-v-20762872] {\n\tfont-size: 18px;\n\twidth: 100%;\n\talignment: left;\n\ttext-align: left;\n}\n",""])},cQ2i:function(t,a,e){var s=e("Iq2B");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("073b4f8c",s,!0)},mkJC:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,r=e("vt++"),l=(e("0xDb"),e("GoTw")),i=e("weGg"),n=e("IcnI"),o={name:"RepairPartsDetail",components:{},props:{repairRecorderInfo:{type:Object,default:{}}},data:function(){return s=this,{loading:{},formData:{},activeTabId:0,statusList:r.a.RepairStatusList,partStatusList:r.a.SendBackStatusList,voiceInfo:{voiceIndex:-1,voiceUrl:"",voiceType:"audio/mp3"},skillStars:{},repairMembers:[],issuePositionList:[]}},computed:{isShowAgent:{get:function(){var t=!1;return isStringEmpty(s.formData.machineAgentName)||(t=0==s.formData.forwardInfo),s.activeTabId=t?"0":"1",t}},isShowSinsim:{get:function(){var t=!0;return n.a.getters.user.user.agent>0?t=!1:isStringEmpty(s.formData.machineAgentName)||(t=s.formData.forwardInfo>0),t}}},filters:{filterIssuePosition:function(t){for(var a="",e=0;e<s.issuePositionList.length;e++)if(t==s.issuePositionList[e].id){a=s.issuePositionList[e].name;break}return a},converterUrl:function(t){return isStringEmpty(t)?"":(t=t.replace(r.a.FilterUrl,"").trim(" "),r.a.WEBURL+t)},filterDateString:function(t){return isStringEmpty(t)?"":new Date(t).format("yyyy-MM-dd")},filterStatus:function(t){for(var a=s.statusList[0].name,e=0;e<s.statusList.length;e++)if(t==s.statusList[e].value){a=s.statusList[e].name;break}return a},filterPartStatus:function(t){for(var a="",e=0;e<s.partStatusList.length;e++)if(t==s.partStatusList[e].value){a=s.partStatusList[e].name;break}return a}},methods:{splitToArray:function(t){return isStringEmpty(t)?"":t.split(",")},onStarLoad:function(t){return Object(i.c)(t.starMode)},onSelectIcon:function(t){var a="voice";return this.voiceInfo.voiceIndex==t&&(a="voice_fill"),a},onSelectVoice:function(t){return this.voiceInfo.voiceIndex==t?"#2b669a":"#d9edf7"},onPlayVoice:function(t,a){var e=document.getElementById("audioId");null!=t&&(t=t.replace(r.a.FilterUrl,"").trim(" "),e.paused||this.voiceInfo.voiceIndex!=a?(this.voiceInfo.voiceUrl=r.a.WEBURL+t,this.voiceInfo.voiceIndex=a,this.voiceInfo.voiceType=getAudioType(t),e.load()):e.pause())},loadMembers:function(){s.repairMembers=[];var t={page:"",size:"",repairRecordId:s.formData.id};Object(l.h)(t).then(function(t){responseIsOK(t)?s.repairMembers=t.data.data.list:showMSG(s,isStringEmpty(t.data.message)?"查询数据失败！":t.data.message)})},loadData:function(){Object(l.f)({}).then(function(t){responseIsOK(t)&&(s.issuePositionList=t.data.data.list)}),this.formData={},this.formData=copyObject(s.repairRecorderInfo),this.skillStars=Object(i.d)(s.formData.repairFeedbackCustomerMark),s.loadMembers()},tabSwitchClick:function(t){console.log("tabSwitchClick:"+t)}},mounted:function(){s.loadData()}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"root_div"},[e("el-form",{attrs:{model:t.formData,"label-position":"right","label-width":"100px"}},[e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("客户信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"客户:"}},[e("span",{staticClass:"MainInfo",domProps:{innerHTML:t._s(t.formData.machineCustomerName)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系方式:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineCustomerPhone)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"代理商:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineAgentName)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系方式:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineAgentPhone)}})])],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("机器信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"机器编号:"}},[e("span",{staticClass:"MainInfo",domProps:{innerHTML:t._s(t.formData.machineNameplate)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"机型:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.machineType)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"针数:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.needleNum)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"头数:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.headNum)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"头距:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.headDistance)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"X行程:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.xDistance)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"Y行程:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.yDistance)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"出厂日期:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.facoryDate)))])])],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("维修信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"维修联系人:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerNameInRepairRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系电话:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerPhoneInRepairRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"地址:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.customerAddressInRepairRecord)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"报修时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.createTime)))])])],1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"维修结果:"}},[0==t.formData.status?e("div",{staticStyle:{color:"#686868"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),1==t.formData.status?e("div",{staticStyle:{color:"#8b6c0e"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),2==t.formData.status?e("div",{staticStyle:{color:"#13678b"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),3==t.formData.status?e("div",{staticStyle:{color:"red"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),4==t.formData.status?e("div",{staticStyle:{color:"orange"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),5==t.formData.status?e("div",{staticStyle:{color:"indianred"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),6==t.formData.status?e("div",{staticStyle:{color:"#13ce66"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e(),t._v(" "),7==t.formData.status?e("div",{staticStyle:{color:"#198b57"}},[t._v("\n                                "+t._s(t._f("filterStatus")(t.formData.status))+"\n                            ")]):t._e()])],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("报修内容")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"报修时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.createTime)))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"报修问题:"}},[e("span",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.formData.repairRequestTitle))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"文字描述:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.repairRequestContent)}})])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"图片描述:"}},[e("div",t._l(t.splitToArray(t.formData.repairRequestPictures),function(a){return e("a",{attrs:{"data-magnify":"gallery","data-caption":"图片预览",href:t._f("converterUrl")(a)}},[e("img",{staticStyle:{width:"250px",height:"300px",margin:"3px"},attrs:{src:t._f("converterUrl")(a),alt:t._f("converterUrl")(a)}})])}))])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"声音描述:"}},[e("audio",{staticStyle:{"margin-left":"-6px",visibility:"hidden"},attrs:{id:"audioId",autoplay:"true",controls:"controls"}},[e("source",{attrs:{src:t.voiceInfo.voiceUrl,type:t.voiceInfo.voiceType}})]),t._v(" "),t._l(t.splitToArray(t.formData.repairRequestVoice),function(a,s){return e("el-col",{attrs:{span:2}},[e("span",{style:{"border-color":t.onSelectVoice(s)},on:{click:function(e){t.onPlayVoice(a,s)}}},[e("el-tooltip",{attrs:{placement:"top",content:t._f("converterUrl")(a)}},[e("svg-icon",{staticStyle:{width:"100px",height:"100px",margin:"3px",cursor:"hand"},attrs:{"icon-class":t.onSelectIcon(s),"data-toggle":"tooltip","data-placement":"top",title:t._f("converterUrl")(a)},on:{click:function(e){t.onPlayVoice(a,s)}}})],1)],1)])})],2)],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("维修结果")])]),t._v(" "),e("div",{staticClass:"panel-body"},[e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabSwitchClick},model:{value:t.activeTabId,callback:function(a){t.activeTabId=a},expression:"activeTabId"}},[t.isShowAgent?e("el-tab-pane",{attrs:{label:"代理商维修",name:"0"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"维修负责人:"}},[e("el-tag",{staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                    "+t._s(t.formData.repairChargePersonName)+"\n                                ")])],1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系电话:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.repairChargePersonPhone)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"开始时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.repairStartTime)))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"完成时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.repairEndTime)))])])],1),t._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"维修人员:"}},t._l(t.repairMembers,function(a){return e("el-tag",{key:a.name,staticClass:"tagClass",attrs:{type:"info"}},[t._v("\n                                        "+t._s(a.name)+"\n                                    ")])}))],1)],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"维修员描述:"}},[e("span",[t._v(t._s(t.formData.repairActualIssueDescription))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"解决方案:"}},[e("span",[t._v(t._s(t.formData.repairActualMethod))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"故障部位:"}},t._l(t.splitToArray(t.formData.issuePositionList),function(a){return e("el-tag",{key:a,staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                        "+t._s(t._f("filterIssuePosition")(a))+"\n\t                            ")])}))],1)],1):t._e(),t._v(" "),t.isShowSinsim?e("el-tab-pane",{attrs:{label:"信胜维修",name:"1"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"维修负责人:"}},[e("el-tag",{staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                    "+t._s(t.formData.repairChargePersonName)+"\n                                ")])],1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"联系电话:"}},[e("span",{domProps:{innerHTML:t._s(t.formData.repairChargePersonPhone)}})])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"开始时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.repairStartTime)))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"完成时间:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.repairEndTime)))])])],1),t._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"维修人员:"}},t._l(t.repairMembers,function(a){return e("el-tag",{key:a.name,staticClass:"tagClass",attrs:{type:"info"}},[t._v("\n                                        "+t._s(a.name)+"\n                                     ")])}))],1)],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"维修员描述:"}},[e("span",[t._v(t._s(t.formData.repairActualIssueDescription))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"解决方案:"}},[e("span",[t._v(t._s(t.formData.repairActualMethod))])])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"故障部位:"}},t._l(t.splitToArray(t.formData.issuePositionList),function(a){return e("el-tag",{key:a,staticClass:"tagClass",attrs:{type:"success"}},[t._v("\n                                        "+t._s(t._f("filterIssuePosition")(a))+"\n\t                            ")])}))],1)],1):t._e(),t._v(" "),e("el-tab-pane",{attrs:{label:"客户评价",name:"2"}},[e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"用户评分:"}},[e("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._l(t.skillStars,function(a){return e("div",{staticStyle:{float:"left"}},[e("svg-icon",{staticStyle:{width:"30px",height:"30px",margin:"3px"},attrs:{"icon-class":t.onStarLoad(a),"data-toggle":"tooltip","data-placement":"top",title:a.score}})],1)}),t._v(" "),""!=t.formData.repairFeedbackCustomerMark?e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                                        "+t._s(t.formData.repairFeedbackCustomerMark)+"分\n                                    ")]):e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                                        暂无评分\n                                    ")])],2)])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"用户评论:"}},[e("div",{staticClass:"control-label",staticStyle:{float:"left","margin-left":"10px","font-weight":"bold"}},[t._v("\n                                    "+t._s(t.formData.repairFeedbackCustomerSuggestion)+"\n                                ")])])],1)],1)],1)],1)]),t._v(" "),e("div",{staticClass:"panel panel-primary"},[e("div",{staticClass:"panel-heading",staticStyle:{"text-align":"left"}},[e("h3",{staticClass:"panel-title"},[t._v("配件信息")])]),t._v(" "),e("div",{staticClass:"panel-body",staticStyle:{"margin-left":"-20px"}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"单号:"}},[e("span",[t._v(t._s(t.formData.sendbackTrackingNumber))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"配件名称:"}},[e("span",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("\n                            "+t._s(t.formData.partsName)+"\n                        ")])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"供应商:"}},[e("span",[t._v(t._s(t.formData.supplier))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"回寄日期:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.sendbackDate)))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"确认日期:"}},[e("span",[t._v(t._s(t._f("filterDateString")(t.formData.sendbackConfirmedTime)))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"确认人:"}},[e("span",[t._v(t._s(t.formData.sendbackConfirmedPersonName))])])],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"状态:"}},[1==t.formData.partsStatus?e("div",{staticStyle:{color:"red"}},[t._v("\n                                "+t._s(t._f("filterPartStatus")(t.formData.partsStatus))+"\n                            ")]):t._e(),t._v(" "),2==t.formData.partsStatus?e("div",{staticStyle:{color:"#13678b"}},[t._v("\n                                "+t._s(t._f("filterPartStatus")(t.formData.partsStatus))+"\n                            ")]):t._e(),t._v(" "),3==t.formData.partsStatus?e("div",{staticStyle:{color:"#198b57"}},[t._v("\n                                "+t._s(t._f("filterPartStatus")(t.formData.partsStatus))+"\n                            ")]):t._e(),t._v(" "),4==t.formData.partsStatus?e("div",{staticStyle:{color:"lightskyblue"}},[t._v("\n                                "+t._s(t._f("filterPartStatus")(t.formData.partsStatus))+"\n                            ")]):t._e()])],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",{attrs:{label:"配件图片:"}},[e("div",t._l(t.splitToArray(t.formData.sendbackTrackingPictrue),function(a){return e("a",{attrs:{"data-magnify":"gallery","data-caption":"图片预览",href:t._f("converterUrl")(a)}},[e("img",{staticStyle:{width:"250px",height:"300px",margin:"3px"},attrs:{src:t._f("converterUrl")(a),alt:t._f("converterUrl")(a)}})])}))])],1)],1)])])],1)},staticRenderFns:[]};var f=e("VU/8")(o,c,!1,function(t){e("cQ2i")},"data-v-20762872",null);a.default=f.exports}});